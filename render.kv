#:kivy 1.8.0

<RenderGUI>:
    s: settings
    spanel: settingspanel

    canvas:
        Rectangle:
            id: bg_rect
            pos: (0,0)
            texture: root.texture
            size: root.texture_size

    ToggleButton:
        id: showhelp
        pos: (10, root.height - 40)
        size: (95, 30)
        text: 'Hide help' if self.state == 'down' else 'Show help'

    Button:
        id: showsettings
        pos: (110, root.height - 40)
        size: (95, 30)
        text: 'Show Settings'
        on_press: (lambda: setattr(settings, 'x', 0))()

    Button:
        id: saveimage
        pos: (210, root.height - 40)
        size: (95, 30)
        text: 'Save Image'
        on_press: root.save_image()

    Button:
        id: savespectra
        pos: (310, root.height - 40)
        size: (95, 30)
        text: 'Save Spectra'
        on_press: root.save_spectra()

    Label:
        font_size: 15
        center_x: 110
        top: root.height - 70
        valign: 'top'
        text: root.helptext if showhelp.state == 'down' else ""

    SettingsWithSpinner:
        id: settings
        size: (300, 0)
        x: -800
        on_config_change: root._settings_change(args[2], args[3], args[4])
        on_close: setattr(self, 'x', -800)

    SettingsPanel:
        id: settingspanel
        settings: settings
        title: 'Render Settings'
